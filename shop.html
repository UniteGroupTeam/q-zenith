<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-ZENITH | Telemetry Catalog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;400;600&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { --carbon-black: #0a0a0a; --ferrari-red: #d40000; --pure-white: #ffffff; }
        body { background-color: var(--carbon-black); font-family: 'Manrope', sans-serif; color: var(--pure-white); overflow-x: hidden; }
        .brand-font { font-family: 'Syncopate', sans-serif; }

        /* GRID BG */
        .tech-grid-bg { background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); background-size: 50px 50px; }

        /* FILTERS */
        .filter-option { display: block; padding: 10px 0; color: #666; font-size: 0.85rem; cursor: pointer; transition: all 0.3s ease; position: relative; }
        .filter-option:hover, .filter-option.active { color: white; padding-left: 10px; }
        .filter-option:hover::before, .filter-option.active::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 4px; height: 4px; background-color: var(--ferrari-red); }

        /* PRODUCT CARDS */
        .catalog-card { background: #0f0f0f; border: 1px solid #1c1c1c; transition: all 0.3s ease; display: block; }
        .catalog-card:hover { border-color: #333; transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .catalog-img-wrap { height: 350px; overflow: hidden; position: relative; }
        .catalog-img-wrap img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; filter: grayscale(100%) contrast(1.1); }
        .catalog-card:hover .catalog-img-wrap img { transform: scale(1.05); filter: grayscale(0%) contrast(1); }
        .add-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); transform: translateY(100%); transition: transform 0.3s ease; display: flex; justify-content: space-between; align-items: center; }
        .catalog-card:hover .add-overlay { transform: translateY(0); }
        .hide-scrollbar::-webkit-scrollbar { display: none; }

        /* CART DRAWER */
        #cart-sidebar { position: fixed; top: 0; right: -400px; width: 100%; max-width: 400px; height: 100vh; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); border-left: 1px solid #333; z-index: 100; transition: right 0.4s cubic-bezier(0.77, 0, 0.175, 1); display: flex; flex-direction: column; }
        #cart-sidebar.open { right: 0; }
        .cart-item { border-bottom: 1px solid #1c1c1c; padding: 15px 0; display: flex; gap: 15px; }
        .cart-item img { width: 60px; height: 60px; object-fit: cover; border: 1px solid #333; }

        /* NAV STYLES (From Index) */
        .nav-link { position: relative; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 1px; bottom: -4px; left: 0; background-color: var(--ferrari-red); transition: width 0.3s ease; }
        .nav-link:hover::after { width: 100%; }
        .mobile-menu-enter { opacity: 0; pointer-events: none; transform: translateY(-20px); }
        .mobile-menu-active { opacity: 1; pointer-events: auto; transform: translateY(0); }

        /* ANIMATIONS FOR FILTERS */
        #mobile-filters-panel { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="tech-grid-bg min-h-screen flex flex-col pt-24">

    <!-- MOBILE MENU OVERLAY (NAVIGATION) -->
    <div id="mobile-menu" class="fixed inset-0 bg-black/95 z-40 flex flex-col justify-center items-center mobile-menu-enter transition-all duration-300">
        <nav class="flex flex-col items-center gap-8">
            <a href="index.html" class="mobile-link text-2xl text-white font-mono tracking-widest hover:text-red-600 transition-colors">INICIO</a>
            <a href="shop.html" class="mobile-link text-2xl text-white font-mono tracking-widest hover:text-red-600 transition-colors">CATÁLOGO</a>
            <a href="index.html#showroom" class="mobile-link text-2xl text-white font-mono tracking-widest hover:text-red-600 transition-colors">LATEST DROPS</a>
            <a href="index.html#identity" class="mobile-link text-2xl text-white font-mono tracking-widest hover:text-red-600 transition-colors">ENGINEERING</a>
        </nav>
        <div class="absolute bottom-10 text-xs text-gray-600 font-mono">Q-ZENITH MOBILE INTERFACE</div>
    </div>

    <!-- MAIN NAVIGATION BAR -->
    <nav class="fixed w-full z-50 top-0 left-0 p-6 flex justify-between items-center text-white bg-black/90 backdrop-blur-md border-b border-[#1c1c1c] transition-all duration-300" id="navbar">
        <a href="index.html" class="cursor-pointer z-50 relative">
            <img src="https://imgur.com/yyT9Gt7.png" alt="Q-ZENITH" class="h-10 md:h-12 object-contain drop-shadow-lg hover:scale-105 transition-transform">
        </a>
        
        <div class="flex items-center gap-6 z-50">
            <!-- Desktop Links -->
            <div class="hidden md:flex items-center gap-10">
                <a href="index.html" class="nav-link font-mono text-xs tracking-widest text-gray-300 hover:text-white transition-colors">INICIO</a>
                <a href="shop.html" class="nav-link font-mono text-xs tracking-widest text-white transition-colors">CATÁLOGO</a>
                <a href="index.html#showroom" class="nav-link font-mono text-xs tracking-widest text-gray-300 hover:text-white transition-colors">DROPS</a>
                <a href="index.html#identity" class="nav-link font-mono text-xs tracking-widest text-gray-300 hover:text-white transition-colors">ENGINEERING</a>
            </div>

            <!-- Cart Trigger -->
            <div class="relative cursor-pointer group" onclick="toggleCart()">
                <i class="fa-solid fa-bag-shopping text-white text-lg group-hover:text-red-600 transition-colors"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-700 text-white text-[9px] w-4 h-4 flex items-center justify-center rounded-full opacity-0 transition-opacity">0</span>
            </div>

            <!-- Mobile Hamburger -->
            <div class="md:hidden cursor-pointer group p-2" id="mobile-menu-btn">
                <div id="bar1" class="w-8 h-[2px] bg-white mb-2 transition-all duration-300 shadow-[0_0_5px_rgba(0,0,0,0.5)]"></div>
                <div id="bar2" class="w-6 h-[2px] bg-white ml-auto transition-all duration-300 shadow-[0_0_5px_rgba(0,0,0,0.5)]"></div>
            </div>
        </div>
    </nav>

    <!-- MAIN LAYOUT -->
    <div class="flex flex-col md:flex-row flex-grow relative">
        
        <!-- SIDEBAR FILTERS (DESKTOP ONLY) -->
        <aside id="filter-sidebar" class="hidden md:block w-64 p-8 border-r border-[#1c1c1c] bg-black/50 overflow-y-auto">
            <h2 class="text-xs font-mono text-gray-500 mb-8 tracking-widest border-b border-gray-800 pb-2">TELEMETRY FILTERS</h2>
            
            <div class="mb-8">
                <h3 class="text-white text-sm font-bold mb-4 uppercase">Chassis Type</h3>
                <span class="filter-option active" data-filter="all">ALL SYSTEMS</span>
                <span class="filter-option" data-filter="outerwear">OUTERWEAR (Jackets)</span>
                <span class="filter-option" data-filter="mid-layer">MID-LAYER (Hoodies)</span>
                <span class="filter-option" data-filter="base-layer">BASE-LAYER (T-Shirts)</span>
                <span class="filter-option" data-filter="accessories">ACCESSORIES</span>
            </div>
            <div class="mb-8">
                <h3 class="text-white text-sm font-bold mb-4 uppercase">Material Spec</h3>
                <span class="filter-option">GORE-TEX PRO</span>
                <span class="filter-option">CARBON WEAVE</span>
                <span class="filter-option">TECH COTTON</span>
            </div>
        </aside>

        <!-- PRODUCT GRID & MOBILE CONTENT -->
        <main class="flex-grow p-6 md:p-12 w-full">
            
            <!-- Header & Search -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-4 md:mb-8 gap-4">
                <div>
                    <h1 class="text-2xl brand-font text-white">FULL INVENTORY <span class="text-red-700">.01</span></h1>
                    <div class="text-xs font-mono text-gray-500 mt-1">SHOWING <span id="visible-count">4</span> UNITS</div>
                </div>

                <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto">
                    <!-- Search Bar -->
                    <div class="relative group w-full md:w-64">
                        <input type="text" id="search-input" placeholder="SEARCH SYSTEM..." class="w-full bg-[#0f0f0f] border border-[#333] text-white text-xs font-mono p-3 pl-10 focus:outline-none focus:border-red-700 transition-colors uppercase placeholder-gray-600">
                        <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-white transition-colors text-xs"></i>
                    </div>

                    <!-- Mobile Filter Trigger Button -->
                    <button onclick="toggleFilters()" class="md:hidden w-full bg-[#1c1c1c] text-white text-xs font-mono p-3 border border-[#333] hover:bg-[#252525] flex justify-between items-center transition-colors">
                        <span>FILTER SYSTEMS</span>
                        <i class="fa-solid fa-filter text-red-700"></i>
                    </button>
                </div>
            </div>

            <!-- MOBILE FILTERS PANEL (Hidden by default, Accordion style) -->
            <div id="mobile-filters-panel" class="hidden md:hidden w-full bg-[#0a0a0a] border border-[#333] p-6 mb-8 relative">
                <div class="absolute -top-2 left-6 w-3 h-3 bg-[#0a0a0a] border-t border-l border-[#333] transform rotate-45"></div> <!-- Little arrow -->
                
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-white text-xs font-bold mb-4 uppercase text-red-700">Chassis Type</h3>
                        <span class="filter-option active mb-2" data-filter="all">ALL SYSTEMS</span>
                        <span class="filter-option mb-2" data-filter="outerwear">OUTERWEAR</span>
                        <span class="filter-option mb-2" data-filter="mid-layer">MID-LAYER</span>
                        <span class="filter-option mb-2" data-filter="base-layer">BASE-LAYER</span>
                        <span class="filter-option" data-filter="accessories">ACCESSORIES</span>
                    </div>
                    <div>
                        <h3 class="text-white text-xs font-bold mb-4 uppercase text-red-700">Material Spec</h3>
                        <span class="filter-option mb-2">GORE-TEX PRO</span>
                        <span class="filter-option mb-2">CARBON WEAVE</span>
                        <span class="filter-option">TECH COTTON</span>
                    </div>
                </div>
                
                <button onclick="toggleFilters()" class="w-full mt-6 bg-[#1c1c1c] text-xs font-mono py-2 text-gray-400 hover:text-white border border-[#333]">CLOSE PANEL</button>
            </div>

            <!-- Products Container -->
            <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                
                <!-- Item 1 -->
                <a href="product-template.html" class="catalog-card group" data-category="outerwear" data-name="CARBON SHELL PARKA">
                    <div class="catalog-img-wrap">
                        <img src="https://images.unsplash.com/photo-1551488852-080175d2753a?q=80&w=1000&auto=format&fit=crop" alt="Item">
                        <div class="add-overlay">
                            <span class="text-sm font-mono">$850.00</span>
                            <div class="text-xs font-bold text-white hover:text-red-500">CONFIGURE <i class="fa-solid fa-arrow-right"></i></div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <div><h4 class="text-white text-sm font-bold truncate">CARBON SHELL PARKA</h4><p class="text-xs text-gray-500 font-mono mt-1">APEX-01 SERIES</p></div>
                        </div>
                    </div>
                </a>

                <!-- Item 2 -->
                <a href="product-template.html" class="catalog-card group" data-category="mid-layer" data-name="MONO-POSTO HOODIE">
                    <div class="catalog-img-wrap">
                        <img src="https://images.unsplash.com/photo-1542272454315-4c01d7abdf4a?q=80&w=1000&auto=format&fit=crop" alt="Item">
                        <div class="add-overlay">
                            <span class="text-sm font-mono">$320.00</span>
                            <div class="text-xs font-bold text-white hover:text-red-500">CONFIGURE <i class="fa-solid fa-arrow-right"></i></div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <div><h4 class="text-white text-sm font-bold truncate">MONO-POSTO HOODIE</h4><p class="text-xs text-gray-500 font-mono mt-1">VELOCITY SERIES</p></div>
                        </div>
                    </div>
                </a>

                <!-- Item 3 -->
                <a href="product-template.html" class="catalog-card group" data-category="base-layer" data-name="TECH-JERSEY BLACK">
                    <div class="catalog-img-wrap">
                        <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?q=80&w=1000&auto=format&fit=crop" alt="Item">
                        <div class="add-overlay">
                            <span class="text-sm font-mono">$180.00</span>
                            <div class="text-xs font-bold text-white hover:text-red-500">CONFIGURE <i class="fa-solid fa-arrow-right"></i></div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <div><h4 class="text-white text-sm font-bold truncate">TECH-JERSEY BLACK</h4><p class="text-xs text-gray-500 font-mono mt-1">DRIFT SERIES</p></div>
                        </div>
                    </div>
                </a>

                <!-- Item 4 -->
                <a href="product-template.html" class="catalog-card group" data-category="accessories" data-name="AERO CAP V2">
                    <div class="catalog-img-wrap">
                        <img src="https://images.unsplash.com/photo-1591047139829-d91aecb6caea?q=80&w=1000&auto=format&fit=crop" alt="Item">
                        <div class="add-overlay">
                            <span class="text-sm font-mono">$120.00</span>
                            <div class="text-xs font-bold text-white hover:text-red-500">CONFIGURE <i class="fa-solid fa-arrow-right"></i></div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <div><h4 class="text-white text-sm font-bold truncate">AERO CAP V2</h4><p class="text-xs text-gray-500 font-mono mt-1">ACCESSORIES</p></div>
                        </div>
                    </div>
                </a>

            </div>
            
            <!-- No Results Message -->
            <div id="no-results" class="hidden text-center py-20">
                <i class="fa-solid fa-circle-exclamation text-gray-600 text-3xl mb-4"></i>
                <p class="text-gray-400 font-mono text-sm">NO SYSTEMS FOUND MATCHING CRITERIA</p>
                <button onclick="document.getElementById('search-input').value=''; filterProducts();" class="mt-4 text-red-500 text-xs hover:text-white underline cursor-pointer">RESET FILTERS</button>
            </div>
        </main>
    </div>

    <!-- CART SIDEBAR (HIDDEN PAYLOAD) -->
    <div id="cart-sidebar" class="p-6">
        <div class="flex justify-between items-center mb-8 pb-4 border-b border-[#333]">
            <h2 class="text-xl brand-font text-white">CURRENT PAYLOAD</h2>
            <button onclick="toggleCart()" class="text-gray-500 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
        </div>
        <div id="cart-items" class="flex-grow overflow-y-auto hide-scrollbar"><div class="text-center text-gray-600 mt-10 font-mono text-xs">SYSTEM EMPTY</div></div>
        <div class="border-t border-[#333] pt-6 mt-4">
            <div class="flex justify-between text-white font-mono mb-4"><span>TOTAL ESTIMATED</span><span id="cart-total">$ 0.00</span></div>
            <button class="w-full bg-red-700 text-white font-bold py-4 hover:bg-red-800 transition-colors brand-font tracking-widest text-sm">INITIATE CHECKOUT</button>
        </div>
    </div>

    <script>
        // --- MOBILE NAV LOGIC ---
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const bar1 = document.getElementById('bar1');
        const bar2 = document.getElementById('bar2');
        let isMenuOpen = false;

        mobileBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if(isMenuOpen) {
                mobileMenu.classList.add('mobile-menu-active'); mobileMenu.classList.remove('mobile-menu-enter');
                bar1.style.transform = "rotate(45deg) translate(5px, 6px)"; bar2.style.transform = "rotate(-45deg) translate(5px, -6px)"; bar2.style.width = "32px";
            } else {
                mobileMenu.classList.remove('mobile-menu-active'); mobileMenu.classList.add('mobile-menu-enter');
                bar1.style.transform = "rotate(0) translate(0)"; bar2.style.transform = "rotate(0) translate(0)"; bar2.style.width = "24px";
            }
        });

        // --- FILTER & SEARCH SYSTEM ---
        
        // 1. Mobile Filter Toggle (NEW LOGIC: Toggles Accordion)
        const mobileFiltersPanel = document.getElementById('mobile-filters-panel');
        function toggleFilters() {
            mobileFiltersPanel.classList.toggle('hidden');
        }

        // 2. Search & Category Logic
        const searchInput = document.getElementById('search-input');
        const cards = document.querySelectorAll('.catalog-card');
        const noResults = document.getElementById('no-results');
        const countDisplay = document.getElementById('visible-count');
        let activeCategory = 'all';

        // Filter Click Events
        const filters = document.querySelectorAll('.filter-option');
        filters.forEach(filter => {
            filter.addEventListener('click', function() {
                // Highlight active (updates visually in both panels since they share classes)
                // Note: We need to update all instances of this filter (desktop & mobile)
                // Simplified: Remove active from all, then add to clicked.
                
                // Better approach for dual menus:
                // Remove 'active' from ALL filter options in DOM
                document.querySelectorAll('.filter-option').forEach(el => el.classList.remove('active'));
                
                // Add 'active' to the clicked one AND any matching text/data-filter
                // For simplicity in this prototype, just highlighting the clicked one and its siblings in the same container
                this.parentElement.querySelectorAll('.filter-option').forEach(el => el.classList.remove('active'));
                this.classList.add('active');
                
                // If clicked in mobile panel, we might want to close it? 
                // Let's keep it open so they can select more or close manually.
                
                // Set Category
                if(this.dataset.filter) {
                    activeCategory = this.dataset.filter;
                    filterProducts();
                }
            });
        });

        // Search Input Event
        searchInput.addEventListener('keyup', filterProducts);

        function filterProducts() {
            const searchTerm = searchInput.value.toLowerCase();
            let visibleCount = 0;

            cards.forEach(card => {
                const productName = card.dataset.name.toLowerCase();
                const productCategory = card.dataset.category;
                
                // Check Category Match
                const categoryMatch = activeCategory === 'all' || productCategory === activeCategory;
                
                // Check Search Match
                const searchMatch = productName.includes(searchTerm);

                if (categoryMatch && searchMatch) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Update UI
            countDisplay.innerText = visibleCount;
            if(visibleCount === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
            }
        }

        // --- CART SYSTEM (SHARED LOGIC) ---
        let cart = JSON.parse(localStorage.getItem('qzenith_cart')) || [];
        updateCartUI();

        function toggleCart() { document.getElementById('cart-sidebar').classList.toggle('open'); }
        
        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('qzenith_cart', JSON.stringify(cart));
            updateCartUI();
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            const countBadge = document.getElementById('cart-count');
            
            const totalCount = cart.reduce((acc, item) => acc + item.quantity, 0);
            countBadge.innerText = totalCount;
            countBadge.style.opacity = totalCount > 0 ? 1 : 0;

            if (cart.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-600 mt-10 font-mono text-xs">SYSTEM EMPTY</div>';
                totalEl.innerText = '$ 0.00';
                return;
            }

            let html = '';
            let totalPrice = 0;
            cart.forEach((item, index) => {
                totalPrice += item.price * item.quantity;
                html += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="img">
                        <div class="flex-grow">
                            <div class="flex justify-between"><h4 class="text-white text-xs font-bold">${item.name}</h4><button onclick="removeFromCart(${index})" class="text-gray-500 hover:text-red-500 text-xs"><i class="fa-solid fa-trash"></i></button></div>
                            <div class="text-gray-500 text-[10px] font-mono mt-1">SIZE: ${item.size} | QTY: ${item.quantity}</div>
                            <div class="text-white font-mono text-sm mt-2">$ ${item.price.toFixed(2)}</div>
                        </div>
                    </div>`;
            });
            container.innerHTML = html;
            totalEl.innerText = '$ ' + totalPrice.toFixed(2);
        }
    </script>
</body>
</html>