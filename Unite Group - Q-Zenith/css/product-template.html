<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-ZENITH | Spec Sheet</title>
    <!-- Tailwind CSS (Estructura base) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes (Tipografía) -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;400;600&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           ESTILOS INTEGRADOS (ENGINEERING UI)
           ========================================= */
        
        :root {
            --carbon-black: #050505;
            --panel-grey: #0f0f0f;
            --border-grey: #1c1c1c;
            --ferrari-red: #d40000;
            --pure-white: #ffffff;
            --text-muted: #888888;
        }

        body {
            background-color: var(--carbon-black);
            font-family: 'Manrope', sans-serif;
            color: var(--pure-white);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            margin: 0;
            padding: 0;
        }

        h1, h2, h3, .brand-font {
            font-family: 'Syncopate', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* --- VISUALIZADOR DE PRODUCTO --- */
        .main-image-frame {
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-grey);
            background: #000;
            height: 70vh;
            transition: border-color 0.3s ease;
        }
        
        .main-image-frame:hover {
            border-color: #333;
        }

        .main-image-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.3s;
        }

        /* --- BOTONES DE MINIATURAS --- */
        .thumb-btn {
            width: 5rem;
            height: 5rem;
            border: 1px solid var(--border-grey);
            opacity: 0.6;
            transition: all 0.2s;
            cursor: pointer;
            padding: 0;
            background: var(--panel-grey);
        }
        .thumb-btn img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .thumb-btn.active, .thumb-btn:hover {
            border-color: var(--ferrari-red);
            opacity: 1;
            transform: translateY(-2px);
        }

        /* --- SELECTOR DE TALLAS --- */
        .size-selector { display: flex; gap: 10px; margin-top: 10px; }
        .size-selector input { display: none; }
        .size-selector label {
            border: 1px solid var(--border-grey);
            color: var(--text-muted);
            padding: 12px 24px;
            cursor: pointer;
            font-family: 'Syncopate', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            transition: all 0.3s;
            background: rgba(255,255,255,0.02);
        }
        .size-selector input:checked + label {
            background: var(--pure-white);
            color: var(--carbon-black);
            border-color: var(--pure-white);
            box-shadow: 0 0 15px rgba(255,255,255,0.2);
        }
        .size-selector label:hover {
            border-color: #666;
            color: #fff;
        }

        /* --- BOTÓN DE AÑADIR (PAYLOAD) --- */
        .btn-add {
            background: var(--pure-white);
            color: var(--carbon-black);
            border: none;
            padding: 18px 0;
            font-family: 'Syncopate', sans-serif;
            font-weight: 700;
            letter-spacing: 2px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            text-align: center;
            display: block;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .btn-add:hover {
            background: #e6e6e6;
            transform: scale(1.01);
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
        }
        
        .btn-add:active {
            transform: scale(0.98);
        }

        /* --- NAV SUPERIOR --- */
        nav {
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-grey);
        }

        /* --- CART SIDEBAR (Panel Lateral) --- */
        #cart-sidebar {
            position: fixed;
            top: 0;
            right: -450px;
            width: 100%;
            max-width: 450px;
            height: 100vh;
            background: #0a0a0a;
            border-left: 1px solid var(--border-grey);
            z-index: 100;
            transition: right 0.4s cubic-bezier(0.77, 0, 0.175, 1);
            display: flex;
            flex-direction: column;
            padding: 25px;
            box-shadow: -10px 0 30px rgba(0,0,0,0.8);
        }
        #cart-sidebar.open { right: 0; }

        .cart-item {
            border-bottom: 1px solid var(--border-grey);
            padding: 15px 0;
            display: flex;
            gap: 15px;
            animation: fadeIn 0.3s ease;
        }
        .cart-item img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border: 1px solid #333;
        }

        /* --- UTILITIES --- */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-[#050505] min-h-screen">

    <!-- NAV -->
    <nav class="fixed w-full z-50 top-0 left-0 p-6 flex justify-between items-center">
        <a href="shop.html" class="text-gray-400 hover:text-white text-xs font-mono tracking-widest transition-colors">
            <i class="fa-solid fa-arrow-left mr-2 text-red-600"></i>BACK TO GRID
        </a>
        <a href="index.html">
            <img src="https://imgur.com/yyT9Gt7.png" alt="Q-ZENITH" class="h-8 md:h-10 hover:scale-105 transition-transform">
        </a>
        <div class="relative cursor-pointer group" onclick="toggleCart()">
            <i class="fa-solid fa-bag-shopping text-white text-lg group-hover:text-red-600 transition-colors"></i>
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-700 text-white text-[9px] font-bold w-4 h-4 flex items-center justify-center rounded-full opacity-0 transition-opacity duration-300">0</span>
        </div>
    </nav>

    <!-- PRODUCT AREA -->
    <main class="pt-32 pb-20 px-6 container mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            
            <!-- IMAGE SECTION -->
            <div class="lg:col-span-7 flex flex-col gap-4">
                <div class="main-image-frame relative group">
                    <img id="main-img" src="" alt="Product Visual" class="w-full h-full object-cover">
                    <!-- Tech overlay -->
                    <div class="absolute bottom-4 left-4 text-[10px] font-mono text-gray-400 bg-black/70 px-3 py-1 border-l-2 border-red-600">
                        FIG 01. FRONT ELEVATION
                    </div>
                </div>
                <!-- Thumbnails Container -->
                <div class="flex gap-4 overflow-x-auto pb-2 mt-2 hide-scrollbar" id="thumbnails-container">
                    <!-- JS will inject thumbnails here -->
                </div>
            </div>

            <!-- INFO / TELEMETRY SECTION -->
            <div class="lg:col-span-5 relative">
                <div class="sticky top-32">
                    <div class="mb-8 border-b border-[#1c1c1c] pb-6">
                        <div class="flex justify-between items-start mb-3">
                            <h2 id="product-cat" class="text-xs font-mono text-gray-500 tracking-[0.2em] uppercase">LOADING DATA...</h2>
                            <span class="border border-red-700 text-red-600 text-[10px] font-bold px-2 py-1 tracking-wider bg-red-900/10">IN STOCK</span>
                        </div>
                        <h1 id="product-name" class="text-3xl md:text-5xl text-white brand-font mb-4 leading-tight">SYSTEM LOADING</h1>
                        <div id="product-price" class="text-3xl text-white font-mono tracking-tighter">$ 0.00</div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-xs font-bold text-gray-500 mb-3 uppercase tracking-widest brand-font">Engineering Notes</h3>
                        <p id="product-desc" class="text-sm text-gray-400 leading-relaxed font-light">Retrieving system specifications from server...</p>
                    </div>

                    <div class="mb-10">
                        <h3 class="text-xs font-bold text-gray-500 mb-4 uppercase tracking-widest brand-font">Select Chassis Size</h3>
                        <div class="size-selector">
                            <div><input type="radio" id="s" name="size" value="S"><label for="s">S</label></div>
                            <div><input type="radio" id="m" name="size" value="M" checked><label for="m">M</label></div>
                            <div><input type="radio" id="l" name="size" value="L"><label for="l">L</label></div>
                            <div><input type="radio" id="xl" name="size" value="XL"><label for="xl">XL</label></div>
                        </div>
                    </div>

                    <button onclick="addToCart()" class="btn-add">
                        ADD TO PAYLOAD <i class="fa-solid fa-plus ml-2"></i>
                    </button>
                    
                    <div class="mt-6 flex justify-between text-[10px] font-mono text-gray-600">
                        <span><i class="fa-solid fa-truck-fast mr-2"></i>24HR DISPATCH</span>
                        <span><i class="fa-solid fa-shield-halved mr-2"></i>SECURE PROTOCOL</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- CART SIDEBAR -->
    <div id="cart-sidebar">
        <div class="flex justify-between items-center mb-8 pb-4 border-b border-[#333]">
            <h2 class="text-xl brand-font text-white tracking-widest">CURRENT PAYLOAD</h2>
            <button onclick="toggleCart()" class="text-gray-500 hover:text-white transition-colors"><i class="fa-solid fa-xmark text-xl"></i></button>
        </div>
        <div id="cart-items" class="flex-grow overflow-y-auto hide-scrollbar text-gray-600 font-mono text-xs text-center py-10 flex flex-col justify-center items-center">
            <i class="fa-solid fa-box-open text-4xl mb-4 opacity-30"></i>
            SYSTEM EMPTY
        </div>
        <div class="border-t border-[#333] pt-6 mt-4">
            <div class="flex justify-between text-white font-mono mb-4 text-sm"><span>TOTAL ESTIMATED</span><span id="cart-total">$ 0.00</span></div>
            <button class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 transition-colors brand-font tracking-widest text-xs">INITIATE CHECKOUT</button>
        </div>
    </div>

    <script>
        /* =========================================
           DATABASE & LOGIC (INTERNAL BRAIN)
           ========================================= */
        
        const db = {
            'desert-mode': { name: 'DESERT MODE HOODIE', price: 950, cat: 'FLEECE SPEC', img: 'https://imgur.com/SlZM81P.jpg', desc: 'Tejido fleece con calor y comodidad, perfecto para el layering. ENDLESS FUN, NO DLC REQUIRED.' },
            'sant-agata': { name: 'SANT AGATA LS', price: 680, cat: 'LONG SLEEVE CHASSIS', img: 'https://imgur.com/zkn9Ozk.jpg', desc: 'Corte agresivo con un peso y caida que hablan de calidad, negra como la media noche. Una pieza que no pide permiso, toma el espacio.' },
            'detroit-white': { name: 'DETROIT WHITE BOY', price: 950, cat: 'FLEECE SPEC', img: 'https://imgur.com/vb39ncS.jpg', desc: 'Tejido fleece extra suave, blanco como un lienzo, de alta definicion que captura la esencia de una era. Esto es más que streetwear, es una armadura para los que piensan diferente.' },
            'land-missile': { name: 'LAND MISSILE TEE', price: 550, cat: 'AERO TEE', img: 'https://imgur.com/seHkRSK.jpg', desc: 'Corte standard limpio y ligero como el aire a 300km/h, estampado de alta definición. VISTE LA LEYENDA, RESPETA LA MAQUINA.' },
            'desert-bloom': { name: 'DESERT BLOOM TEE', price: 550, cat: 'OVERSIZE FIT', img: 'https://imgur.com/IC779LP.jpg', desc: 'Corte oversize relajado, suave y durable para el día a día, estampado pequeño y preciso, un sello de calidad. SI tu armario tuviera un cimiento seria este.' },
            'hz-frequency': { name: 'HZ FREQUENCY TEE', price: 550, cat: 'AERO TEE', img: 'https://imgur.com/GLkSgtC.jpg', desc: 'Silueta contemporanea y desenfadada, estampado pequeño y preciso en el corazón, donde llevas tu identidad. BLANCA COMO UNA SEÑAL PURA Y PRECISA COMO UN LATIDO.' },
            'rager-crew': { name: 'RAGER CREW NECK', price: 890, cat: 'HEAVY CREW', img: 'https://imgur.com/40MdSUp.jpg', desc: 'Estampado trasero con tipografía limpia y poderosa, negra como el espacio interestelar de un album conceptual. WHEN THE VISION IS TOO CLEAR.' },
            'white-noise': { name: 'WHITE NOISE RACER', price: 590, cat: 'HD PRINT', img: 'https://imgur.com/X2LaEps.jpg', desc: 'Estampado en tono sobre tono, de alta densidad para un blanco impecable y duradero. BLANCO SOBRE BLANCO, UN SUSURRO EN LA AUTOPISTA.' },
            'glitch-rager': { name: 'THE GLITCH RAGER LS', price: 680, cat: 'TECH LS', img: 'https://imgur.com/umeJ81O.jpg', desc: 'Estampado trasero que lo hace irrepetible, en manga larga, para un look relajado y tech. EL HYPE PUEDE SER OSCURO A VECES, NO SIEMPRE NECESITA OPACAR.' },
            'ultimate-access': { name: 'THE ULTIMATE ACCESS LS', price: 680, cat: 'TECH LS', img: 'https://imgur.com/n1KYPWz.jpg', desc: 'Corte relajado en manga larga, el lienzo perfecto para un grito gráfico, como una firma en un muro. UN NOMBRE, TODA UNA ERA.' }
        };

        let currentId = null;
        
        // --- INICIALIZACIÓN SEGURA ---
        window.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            currentId = params.get('id');

            // Fallback: Si no hay ID o el ID no existe en la DB, cargar Desert Mode por defecto
            if (!currentId || !db[currentId]) {
                console.warn('ID not found or invalid, defaulting to desert-mode');
                currentId = 'desert-mode';
            }

            renderProduct(currentId);
            updateCartUI(); // Cargar carrito guardado
        });

        function renderProduct(id) {
            const p = db[id];
            
            // Actualizar Textos
            document.getElementById('product-name').innerText = p.name;
            document.getElementById('product-price').innerText = `$ ${p.price.toFixed(2)} USD`;
            document.getElementById('product-desc').innerText = p.desc;
            document.getElementById('product-cat').innerText = `SERIES: ${p.cat}`;
            document.title = `Q-ZENITH | ${p.name}`;
            
            // Actualizar Imagen Principal
            const mainImg = document.getElementById('main-img');
            mainImg.style.opacity = 0;
            setTimeout(() => {
                mainImg.src = p.img;
                mainImg.style.opacity = 1;
            }, 200);

            // Generar Miniaturas (Simuladas para el efecto visual)
            const thumbContainer = document.getElementById('thumbnails-container');
            thumbContainer.innerHTML = `
                <button class="thumb-btn active" onclick="switchImage(this, '${p.img}')">
                    <img src="${p.img}" alt="View 1">
                </button>
                 <button class="thumb-btn" onclick="switchImage(this, '${p.img}')">
                    <img src="${p.img}" alt="View Detail" style="transform: scale(1.5);">
                </button>
            `;
        }

        // Lógica de cambio de imagen
        function switchImage(btn, src) {
            const mainImg = document.getElementById('main-img');
            mainImg.style.opacity = 0;
            setTimeout(() => { mainImg.src = src; mainImg.style.opacity = 1; }, 200);
            
            document.querySelectorAll('.thumb-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        /* --- SISTEMA DE CARRITO (LOCALSTORAGE) --- */
        let cart = [];
        try {
            cart = JSON.parse(localStorage.getItem('qzenith_cart')) || [];
        } catch (e) {
            localStorage.removeItem('qzenith_cart'); // Reset si hay error
        }

        const countBadge = document.getElementById('cart-count');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');

        function toggleCart() { document.getElementById('cart-sidebar').classList.toggle('open'); }

        function addToCart() {
            const p = db[currentId];
            const sizeInput = document.querySelector('input[name="size"]:checked');
            
            if(!sizeInput) {
                alert("PLEASE SELECT A CHASSIS SIZE.");
                return;
            }
            const size = sizeInput.value;
            
            // Buscar si ya existe para sumar cantidad
            const existing = cart.find(item => item.id === currentId && item.size === size);
            
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({
                    id: currentId,
                    name: p.name,
                    price: p.price,
                    image: p.img,
                    size: size,
                    quantity: 1
                });
            }
            
            saveCart();
            toggleCart(); // Abrir carrito para confirmar
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
        }

        function saveCart() {
            localStorage.setItem('qzenith_cart', JSON.stringify(cart));
            updateCartUI();
        }

        function updateCartUI() {
            // Actualizar Badge
            const count = cart.reduce((acc, item) => acc + item.quantity, 0);
            if(countBadge) {
                countBadge.innerText = count;
                countBadge.style.opacity = count > 0 ? 1 : 0;
            }
            
            // Si está vacío
            if(cart.length === 0) {
                if(cartItems) cartItems.innerHTML = '<i class="fa-solid fa-box-open text-4xl mb-4 opacity-30"></i>SYSTEM EMPTY';
                if(cartTotal) cartTotal.innerText = "$ 0.00";
                return;
            }

            // Renderizar items
            let html = '';
            let total = 0;
            cart.forEach((item, index) => {
                total += item.price * item.quantity;
                html += `
                <div class="cart-item">
                    <img src="${item.image}">
                    <div class="text-left w-full">
                        <div class="flex justify-between text-white font-bold text-xs tracking-wider">
                            <span>${item.name}</span> 
                            <button onclick="removeFromCart(${index})" class="text-gray-600 hover:text-red-500 transition-colors"><i class="fa-solid fa-trash"></i></button>
                        </div>
                        <div class="text-[10px] text-gray-500 mt-1 font-mono">SIZE: ${item.size} | QTY: ${item.quantity}</div>
                        <div class="text-xs text-white mt-2 font-mono">$ ${item.price.toFixed(2)}</div>
                    </div>
                </div>`;
            });
            
            if(cartItems) cartItems.innerHTML = html;
            if(cartTotal) cartTotal.innerText = "$ " + total.toFixed(2);
        }
    </script>
</body>
</html>